(()=>{"use strict";var e={363:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(601),i=s.n(n),a=s(314),r=s.n(a)()(i());r.push([e.id,".about {\n  align-items: center;\n  border: 1px solid;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  min-width: 300px;\n  max-width: 1024px;\n  padding: 1%;\n  position: relative;\n  top: 20vh;\n  width: 75%;\n}\n\n.about-list {\n  margin-top: -2px;\n  padding-left: 20px;\n}\n\n.about-text {\n  word-wrap: break-word;\n  padding: 0 10px;\n  text-align: justify;\n}\n\n.about-footer {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  position: relative;\n}\n\n.about-link {\n  position: absolute;\n  right: -60px;\n}\n\n.about-link-img {\n  height: 32px;\n  width: 32px;\n  margin: 0;\n  padding: 0;\n}\n",""]);const o=r},163:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(601),i=s.n(n),a=s(314),r=s.n(a)()(i());r.push([e.id,".chat {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  width: 90vw;\n  max-width: 1024px;\n  margin: 0 auto;\n  gap: 4px;\n}\n\n.chat-header {\n  min-height: 40px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  border: 1px solid;\n  border-radius: 5px;\n  padding: 0 10px;\n}\n\n.chat-header-user-name {\n  display: flex;\n  max-width: 50%;\n  overflow: hidden;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n}\n\n.chat-header-user-name-name {\n  font-weight: 600;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.chat-header-app-name {\n  text-align: center;\n  font-weight: 800;\n  color: #ff8616;\n  width: 70px;\n}\n\n.chat-header-buttons {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.chat-header-buttons-logout {\n  min-width: 140px;\n  height: 32px;\n  margin: 1%;\n  max-width: 200px;\n  width: 50%;\n  border: 1px solid;\n  border-radius: 5px;\n  font-size: 18px;\n}\n\n.chat-header-buttons-info {\n  margin-left: 2px;\n  margin-right: -4px;\n  height: 32px;\n  min-width: 32px;\n  border: 1px solid;\n  border-radius: 35%;\n  font-size: 22px;\n  font-style: italic;\n  font-weight: 800;\n}\n\n.chat-main {\n  display: flex;\n  flex-direction: row;\n  height: 70vh;\n  width: 100%;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.chat-main-left {\n  padding: 4px;\n  height: 100%;\n  width: 35%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  border: 1px solid;\n  border-radius: 5px;\n}\n\n.chat-main-left-search {\n  height: 24px;\n  padding: 0 4px;\n  width: 100%;\n}\n\n.chat-main-left-users-list {\n  padding: 1%;\n  margin: 1%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  overflow-y: scroll;\n}\n\n.chat-main-left-users-list-user {\n  width: 100%;\n  padding: 2px 4px;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  justify-content: flex-start;\n  border-radius: 2px;\n  cursor: pointer;\n}\n\n.chat-main-left-users-list-user:hover {\n  background-color: #eeeeee;\n}\n\n.chat-main-left-users-list-user-status {\n  width: 8px;\n  height: 8px;\n  margin-right: 8px;\n  border: 1px solid;\n  border-radius: 50%;\n  background: #7a3100;\n  cursor: pointer;\n}\n\n.user-status-active {\n  background: #41e441;\n}\n\n.chat-main-left-users-list-user-login {\n  font-weight: 600;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 88%;\n  cursor: pointer;\n}\n\n.chat-main-left-users-list-user-messages {\n  min-width: 15px;\n  border: 1px solid #41e441;\n  border-radius: 50%;\n  font-size: 10px;\n  text-align: center;\n  cursor: pointer;\n}\n\n.chat-main-right {\n  height: 100%;\n  width: 64.5%;\n  padding: 4px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  border: 1px solid;\n  border-radius: 5px;\n}\n\n.chat-main-right-companion {\n  width: 100%;\n  max-height: 35px;\n  height: 10%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-around;\n  border-bottom: 1px solid;\n}\n\n.chat-main-right-companion-login {\n  font-weight: 600;\n  max-width: 80%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.chat-main-right-companion-status {\n  font-weight: 600;\n  color: #41e441;\n}\n\n.status-offline {\n  color: #6d3100;\n}\n\n.chat-main-right-dialog {\n  padding: 4px;\n  width: 100%;\n  height: 80%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  overflow-y: scroll;\n}\n\n.chat-main-right-dialog-message {\n  display: flex;\n  flex-direction: column;\n  margin: 1% 0;\n  width: 100%;\n  align-items: flex-end;\n}\n\n.message-from-companion {\n  align-items: flex-start;\n}\n\n.chat-main-right-dialog-message-box {\n  padding: 1%;\n  width: 60%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  background: #f5f5f5;\n  border-radius: 5px;\n}\n\n.chat-main-right-dialog-message-box-header {\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  font-size: 0.7rem;\n  justify-content: space-between;\n  width: 80%;\n}\n\n.chat-main-right-dialog-message-box-header-label-left {\n  font-size: 0.7rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.chat-main-right-dialog-message-box-header-label-right {\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  font-size: 0.7rem;\n  justify-content: space-between;\n  margin: 0 0 0 auto;\n}\n\n.chat-main-right-dialog-message-box-text {\n  background: #fdfdfd;\n  border-radius: 5px;\n  box-sizing: border-box;\n  margin: 2% 0 0;\n  padding: 3%;\n  text-align: justify;\n  width: 100%;\n  word-wrap: break-word;\n}\n\n.chat-main-right-dialog-message-box-footer {\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  font-size: 0.7rem;\n  justify-content: space-between;\n  width: 80%;\n}\n\n.chat-main-right-dialog-message-box-footer-label-left {\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  font-size: 0.7rem;\n  justify-content: space-between;\n}\n\n.chat-main-right-dialog-message-box-footer-label-right {\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  font-size: 0.7rem;\n  justify-content: space-between;\n}\n\n.chat-main-right-dialog-placeholder {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.chat-main-right-send {\n  margin-top: 4px;\n  padding-top: 4px;\n  height: 15%;\n  max-height: 35px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  border-top: 1px solid;\n  align-items: center;\n}\n\n.chat-main-right-send-input {\n  height: 28px;\n  padding: 0 4px;\n  width: 90%;\n}\n\n.chat-main-right-send-button {\n  min-width: 100px;\n  max-width: 100px;\n  height: 32px;\n  margin: 0;\n  margin-left: 2px;\n  width: 50%;\n  border: 1px solid;\n  border-radius: 5px;\n  font-size: 18px;\n}\n\n.chat-footer {\n  min-height: 40px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  justify-content: space-around;\n  border: 1px solid;\n  border-radius: 5px;\n}\n\n.chat-footer-about {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 4px;\n}\n\n.chat-footer-about-link {\n  height: 32px;\n  width: 32px;\n}\n\n.chat-footer-about-link-img {\n  height: 32px;\n  width: 32px;\n  margin: 0;\n  padding: 0;\n}\n\n.line-before-unread-message {\n  font-size: 0.7em;\n  position: relative;\n  text-align: center;\n  width: 100%;\n}\n\n.line-before-unread-message:before {\n  border-bottom: 1px solid;\n  content: ' ';\n  left: 0;\n  position: absolute;\n  top: 8px;\n  width: 100%;\n}\n\n.line-before-unread-message-text {\n  background: #fff;\n  margin: 1%;\n  padding: 0 5%;\n  position: relative;\n}\n\n.disabled {\n  cursor: default;\n}\n\n.hide-element {\n  opacity: 0;\n}\n\n@media (max-width: 768px) {\n  .chat-header-buttons-logout {\n    min-width: 70px;\n  }\n\n  .chat-main-right-send {\n    max-height: 60px;\n    flex-direction: column;\n  }\n\n  .chat-main-right-send-input {\n    width: 100%;\n  }\n\n  .chat-main-right-send-button {\n    margin-top: 4px;\n    max-width: 140px;\n  }\n}\n",""]);const o=r},983:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(601),i=s.n(n),a=s(314),r=s.n(a)()(i());r.push([e.id,".login-form {\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  padding: 2px;\n  position: relative;\n  top: 20vh;\n  width: 340px;\n}\n\n.login-form-fieldset {\n  display: flex;\n  margin-bottom: 3%;\n  gap: 10px;\n  flex-direction: column;\n  width: 100%;\n  border: 1px solid;\n  border-radius: 5px;\n}\n\n.login-form-fieldset-field {\n  display: flex;\n  margin: 3% 0;\n  width: 100%;\n  justify-content: space-between;\n  flex-direction: column;\n}\n\n.login-form-fieldset-field-container {\n  display: flex;\n  flex-direction: column;\n}\n\n.login-form-fieldset-field-container-input {\n  padding: 1% 2%;\n  font-size: inherit;\n  border: 1px solid;\n  border-radius: 3px;\n}\n\n.login-form-fieldset-field-container-tooltip {\n  color: red;\n  font-size: 0.7rem;\n  display: none;\n}\n\n.input-error input {\n  border: 1px solid red;\n}\n\n.input-error .tooltip-name-length,\n.input-error .tooltip-password-length,\n.input-error-contains .tooltip-password-contains {\n  display: unset;\n}\n\n.login-form-fieldset-buttons {\n  display: flex;\n  margin: 3% 0;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n}\n\n.splash-error-background {\n  width: 50%;\n  height: 50%;\n  position: absolute;\n  background-color: unset;\n  top: 40px;\n  z-index: 1;\n}\n\n.splash-error {\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  font-size: 18px;\n  background-color: #ffe5e5;\n  border: 1px solid;\n  border-radius: 5px;\n  justify-content: center;\n  text-align: center;\n}\n",""]);const o=r},823:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(601),i=s.n(n),a=s(314),r=s.n(a)()(i());r.push([e.id,".splash-background {\n  width: 100vw;\n  height: 100vh;\n  position: absolute;\n  background-color: unset;\n  z-index: 1;\n}\n\n.splash {\n  margin: 25vh auto;\n  padding: 20px;\n  width: 350px;\n  height: 200px;\n  top: 25vh;\n  left: 36vw;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  font-size: 25px;\n  background-color: var(--background-darkness-color);\n  border: 1px solid;\n  border-radius: 5px;\n}\n\n.splash-icons {\n  width: 64px;\n  height: 64px;\n}\n\n.splash-text {\n  display: flex;\n  margin-left: 45px;\n  width: 100%;\n  justify-content: space-between;\n  flex-direction: column;\n}\n",""]);const o=r},696:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(601),i=s.n(n),a=s(314),r=s.n(a)()(i());r.push([e.id,".console-window {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  width: 40vw;\n  max-width: 360px;\n  height: 25vh;\n  top: 1%;\n  background-color: unset;\n  color: var(--color);\n  border-radius: 2px;\n  z-index: 10;\n  align-items: start;\n  align-self: flex-end;\n}\n\n.console-window-text {\n  width: 100%;\n  font-size: 12px;\n  font-weight: 200;\n  text-align: left;\n  padding: 2px 4px;\n  overflow-y: scroll;\n}\n\n.console-window-text p {\n  padding: 0;\n  margin: 0;\n  line-height: 12px;\n  margin-bottom: 6px;\n  word-wrap: break-word;\n}\n",""]);const o=r},297:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(601),i=s.n(n),a=s(314),r=s.n(a)()(i());r.push([e.id,".app-button {\n  min-width: 140px;\n  height: 32px;\n  margin: 1%;\n  max-width: 200px;\n  width: 50%;\n  border: 1px solid;\n  border-radius: 5px;\n  font-size: 18px;\n}\n\n.app-button-info {\n  height: 32px;\n  margin: 1%;\n  width: 32px;\n  border: 1px solid;\n  border-radius: 35%;\n  font-size: 22px;\n  font-style: italic;\n  font-weight: 800;\n  position: absolute;\n  right: 10%;\n}\n",""]);const o=r},919:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(601),i=s.n(n),a=s(314),r=s.n(a)()(i());r.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap);"]),r.push([e.id,":root {\n  font-family: Lato, Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;\n  line-height: 1.5;\n  font-weight: 400;\n\n  font-synthesis: none;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n\n  --background-color: #fcfcfc;\n  --color: #1d1d1d;\n  --background-darkness-color: #f0f0f0;\n}\n\n* {\n  box-sizing: border-box;\n}\n\n* {\n  scrollbar-color: var(--background-darkness-color);\n  scrollbar-width: thin;\n}\n\n::-webkit-scrollbar {\n  height: 10px;\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  background: var(--background-darkness-color);\n}\n\n::-webkit-scrollbar-thumb {\n  border: 1px solid;\n  border-radius: 3px;\n}\n\na {\n  text-decoration: none;\n}\n\nh1 {\n  padding: 0;\n  margin: 0;\n}\n\nh2 {\n  padding: 0;\n  margin: 0;\n}\n\nbutton {\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: row;\n}\n\nbutton:hover {\n  border-width: 3px;\n  box-shadow: inset 0px 0px 5px var(--background-color);\n}\n\nul {\n  padding-inline-start: 0px;\n}\n\nhtml {\n  scroll-behavior: smooth;\n}\n\nbody {\n  min-height: 100vh;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  background-color: var(--background-color);\n  color: var(--color);\n  font-family: Lato, sans-serif;\n  flex-wrap: wrap;\n  border: none;\n  font-size: 16px;\n  font-weight: 400;\n  /* overflow: hidden; */\n}\n\n.element-user-not-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.element-user-not-select * {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n",""]);const o=r},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(n)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(r[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);n&&r[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),s&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=s):c[2]=s),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},601:e=>{e.exports=function(e){return e[1]}},88:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var n=s(72),i=s.n(n),a=s(825),r=s.n(a),o=s(659),l=s.n(o),d=s(56),c=s.n(d),u=s(540),h=s.n(u),g=s(113),p=s.n(g),f=s(363),m={};m.styleTagTransform=p(),m.setAttributes=c(),m.insert=l().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=h(),i()(f.A,m);const E=f.A&&f.A.locals?f.A.locals:void 0},986:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var n=s(72),i=s.n(n),a=s(825),r=s.n(a),o=s(659),l=s.n(o),d=s(56),c=s.n(d),u=s(540),h=s.n(u),g=s(113),p=s.n(g),f=s(163),m={};m.styleTagTransform=p(),m.setAttributes=c(),m.insert=l().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=h(),i()(f.A,m);const E=f.A&&f.A.locals?f.A.locals:void 0},724:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var n=s(72),i=s.n(n),a=s(825),r=s.n(a),o=s(659),l=s.n(o),d=s(56),c=s.n(d),u=s(540),h=s.n(u),g=s(113),p=s.n(g),f=s(983),m={};m.styleTagTransform=p(),m.setAttributes=c(),m.insert=l().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=h(),i()(f.A,m);const E=f.A&&f.A.locals?f.A.locals:void 0},872:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var n=s(72),i=s.n(n),a=s(825),r=s.n(a),o=s(659),l=s.n(o),d=s(56),c=s.n(d),u=s(540),h=s.n(u),g=s(113),p=s.n(g),f=s(823),m={};m.styleTagTransform=p(),m.setAttributes=c(),m.insert=l().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=h(),i()(f.A,m);const E=f.A&&f.A.locals?f.A.locals:void 0},635:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var n=s(72),i=s.n(n),a=s(825),r=s.n(a),o=s(659),l=s.n(o),d=s(56),c=s.n(d),u=s(540),h=s.n(u),g=s(113),p=s.n(g),f=s(696),m={};m.styleTagTransform=p(),m.setAttributes=c(),m.insert=l().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=h(),i()(f.A,m);const E=f.A&&f.A.locals?f.A.locals:void 0},530:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var n=s(72),i=s.n(n),a=s(825),r=s.n(a),o=s(659),l=s.n(o),d=s(56),c=s.n(d),u=s(540),h=s.n(u),g=s(113),p=s.n(g),f=s(297),m={};m.styleTagTransform=p(),m.setAttributes=c(),m.insert=l().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=h(),i()(f.A,m);const E=f.A&&f.A.locals?f.A.locals:void 0},966:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var n=s(72),i=s.n(n),a=s(825),r=s.n(a),o=s(659),l=s.n(o),d=s(56),c=s.n(d),u=s(540),h=s.n(u),g=s(113),p=s.n(g),f=s(919),m={};m.styleTagTransform=p(),m.setAttributes=c(),m.insert=l().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=h(),i()(f.A,m);const E=f.A&&f.A.locals?f.A.locals:void 0},72:e=>{var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var a={},r=[],o=0;o<e.length;o++){var l=e[o],d=n.base?l[0]+n.base:l[0],c=a[d]||0,u="".concat(d," ").concat(c);a[d]=c+1;var h=s(u),g={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(g);else{var p=i(g,n);n.byIndex=o,t.splice(o,0,{identifier:u,updater:p,references:1})}r.push(u)}return r}function i(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,i){var a=n(e=e||[],i=i||{});return function(e){e=e||[];for(var r=0;r<a.length;r++){var o=s(a[r]);t[o].references--}for(var l=n(e,i),d=0;d<a.length;d++){var c=s(a[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=l}}},659:e=>{var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var i=void 0!==s.layer;i&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,i&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var a=s.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},675:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(133),a=s(777),r=n(s(348)),o=n(s(362));t.default=class{constructor(){this.console=new i.Console,i.Console.appendText("Start app"),this.generatorID=new a.GeneratorID,this.states=new r.default,new o.default(this.states)}}},132:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=s(133),o=s(401),l=a(s(957));s(88);class d extends o.Element{constructor(e,t){super(l.about),e.appendChild(this.sellingHTML),this.states=t,this.createListeners(),r.Console.appendText("Create About page")}createListeners(){this.specialElements["about-return"].addEventListener("click",(()=>this.states.router.goToPage(this.states.router.identifyingPageByStatus())))}}t.default=d},957:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.about=void 0,t.about={tag:"main",text:"",attributes:{},classes:"about",child:[{tag:"h3",text:"Fun chat",attributes:{},classes:"",child:[]},{tag:"label",text:'Приложение разработано согласно ТЗ "Fun Chat" в рамках курса RSSchool JS/FE 2023Q4',attributes:{},classes:"about-text",child:[]},{tag:"h3",text:"Цели задания",attributes:{},classes:"",child:[]},{tag:"ul",text:"",attributes:{},classes:"about-list",child:[{tag:"li",text:"Ознакомится с протоколом подключения WebSocket.",attributes:{},classes:"about-text",child:[]},{tag:"li",text:"Получить опыт работы с соединением, при котором как клиентские, так и серверные приложения могут инициировать отправку сообщений.",attributes:{},classes:"about-text",child:[]},{tag:"li",text:"Улучшить и закрепить навыки асинхронного кодирования.",attributes:{},classes:"about-text",child:[]},{tag:"li",text:"Улучшить и закрепить навыки работы с объектной моделью документа (DOM) и создания разметки с помощью кода.",attributes:{},classes:"about-text",child:[]}]},{tag:"div",text:"",attributes:{},classes:"about-footer",child:[{tag:"button",text:"Вернуться",attributes:{type:"button",identifier:"about-return"},classes:"app-button",child:[]},{tag:"a",text:"",attributes:{href:"https://github.com/CerBeer"},classes:"about-link",child:[{tag:"img",text:"",attributes:{alt:"Разработано CerBeer",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFMTZCRDY3REIzRjAxMUUyQUQzREIxQzRENUFFNUM5NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFMTZCRDY3RUIzRjAxMUUyQUQzREIxQzRENUFFNUM5NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUxNkJENjdCQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUxNkJENjdDQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SM9MCAAAA+5JREFUeNrEV11Ik1EY3s4+ddOp29Q5b0opCgKFsoKoi5Kg6CIhuwi6zLJLoYLopq4qsKKgi4i6CYIoU/q5iDAKs6syoS76IRWtyJ+p7cdt7sf1PGOD+e0c3dygAx/67ZzzPM95/877GYdHRg3ZjMXFxepQKNS6sLCwJxqNNuFpiMfjVs4ZjUa/pmmjeD6VlJS8NpvNT4QQ7mxwjSsJiEQim/1+/9lgMHgIr5ohuxG1WCw9Vqv1clFR0dCqBODElV6v90ogEDjGdYbVjXhpaendioqK07CIR7ZAqE49PT09BPL2PMgTByQGsYiZlQD4uMXtdr+JxWINhgINYhGT2MsKgMrm2dnZXgRXhaHAg5jEJodUAHxux4LudHJE9RdEdA+i3Juz7bGHe4mhE9FNrgwBCLirMFV9Okh5eflFh8PR5nK5nDabrR2BNJlKO0T35+Li4n4+/J+/JQCxhmu5h3uJoXNHPbmWZAHMshWB8l5/ipqammaAf0zPDDx1ONV3vurdidqwAQL+pEc8sLcAe1CCvQ3YHxIW8Pl85xSWNC1hADDIv0rIE/o4J0k3kww4xSlwIhcq3EFFOm7KN/hUGOQkt0CFa5WpNJlMvxBEz/IVQAxg/ZRZl9wiHA63yDYieM7DnLP5CiAGsC7I5sgtYKJGWe2A8seFqgFJrJjEPY1Cn3pJ8/9W1e5VWsFDTEmFrBcoDhZJEQkXuhICMyKpjhahqN21hRYATKfUOlDmkygrR4o4C0VOLGJKrOITKB4jijzdXygBKixyC5TDQdnk/Pz8qRw6oOWGlsTKGOQW6OH6FBWsyePxdOXLTgxiyebILZCjz+GLgMIKnXNzc49YMlcRdHXcSwxFVgTInQhC9G33UhNoJLuqq6t345p9y3eUy8OTk5PjAHuI9uo4b07FBaOhsu0A4Unc+T1TU1Nj3KsSSE5yJ65jqF2DDd8QqWYmAZrIM2VlZTdnZmb6AbpdV9V6ec9znf5Q7HjYumdRE0JOp3MjitO4SFa+cZz8Umqe3TCbSLvdfkR/kWDdNQl5InuTcysOcpFT35ZrbBxx4p3JAHlZVVW1D/634VRt+FvLBgK/v5LV9WS+10xMTEwtRw7XvqOL+e2Q8V3AYIOIAXQ26/heWVnZCVfcyKHg2CBgTpmPmjYM8l24GyaUHyaIh7XwfR9ErE8qHoDfn2LTNAVC0HX6MFcBIP8Bi+6F6cdW/DICkANRfx99fEYFQ7Nph5i/uQiA214gno7K+guhaiKg9gC62+M8eR7XsBsYJ4ilam60Fb7r7uAj8wFyuwM1oIOWgfmDy6RXEEQzJMPe23DXrVS7rtyD3Df8z/FPgAEAzWU5Ku59ZAUAAAAASUVORK5CYII="},classes:"about-link-img",child:[]}]}]}]}},162:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(133),l=s(273),d=s(401),c=s(657),u=r(s(117)),h=a(s(564));s(986);class g extends d.Element{constructor(e,t){super(h.chat),this.companions=[],this._currentCompanion="",this._currentCompanionMessages=[],this.lastRequestIDSendMessage="",e.appendChild(this.sellingHTML),this.states=t,this.createListeners(),this.configureDateWhenCreate(),this.updateCompanionsList(),o.Console.appendText("Create Chat page")}createListeners(){this.specialElements["chat-info"].addEventListener("click",(()=>this.states.router.goToPage(l.PAGE_NAMES.ABOUT))),this.specialElements["chat-logout"].addEventListener("click",(()=>this.states.dispatcher.sendLogOut())),this.specialElements["left-users-list"].addEventListener("click",(e=>this.selectCompanions(e))),this.specialElements["right-send-input"].addEventListener("input",(()=>this.setButtonSendDisabled())),this.specialElements["right-send-input-form"].addEventListener("submit",(e=>this.submitMessage(e))),this.specialElements["right-dialog"].addEventListener("click",(()=>{this.setMessageStatusRead();const e=this.specialElements["right-dialog"];e.scrollTop=e.scrollHeight})),this.specialElements["right-dialog"].addEventListener("scroll",(()=>this.setMessageStatusRead())),this.specialElements["left-search"].addEventListener("input",(()=>this.setFilter()))}configureDateWhenCreate(){this.specialElements["user-info"].innerText=`${this.states.loggedUser.login}`}setButtonSendDisabled(){const e=this.checkAvailableMessageSubmit();this.specialElements["right-send-button"].disabled=!e}setMessageSendDisabled(){const e=""===this.lastRequestIDSendMessage&&""!==this._currentCompanion,t=this.specialElements["right-send-input"];e||(t.value=""),t.disabled=!e}submitMessage(e){if(e.preventDefault(),o.Console.appendText(`Chat page: submit message to ${this._currentCompanion}`),!this.checkAvailableMessageSubmit())return;const t=this.specialElements["right-send-input"],s=t.value;return this.lastRequestIDSendMessage=this.states.chatService.requestSendMessage(this._currentCompanion,s),t.value="",this.setMessageSendDisabled(),this.setButtonSendDisabled(),!1}checkAvailableMessageSubmit(){return 0!==this.specialElements["right-send-input"].value.length}selectCompanions(e){const t=e.target;let s=t.dataset.user;s||(s=t.parentElement?.dataset.user),s&&(this._currentCompanion=s,this.states.chatService.changeCurrentCompanion(s),this.setMessageSendDisabled())}receiveMessage(e,t){switch(e){case c.MESSAGES_CHAT_SERVICE_TYPES.UPDATE_COMPANIONS_LIST:this.updateCompanionsList();break;case c.MESSAGES_CHAT_SERVICE_TYPES.RECEIVING_MESSAGE_FROM_COMPANION:this.processReceivingMessageFromCompanion(t),this.updateCompanionsList();break;case c.MESSAGES_CHAT_SERVICE_TYPES.MESSAGE_HISTORY_WITH_USER:this.createMessagesList(JSON.parse(t));break;case c.MESSAGES_CHAT_SERVICE_TYPES.COMPANION_STATUS_UPDATE:this.updateCompanionsList(),t===this._currentCompanion&&this.setCurrentCompanionStatus();break;case c.MESSAGES_CHAT_SERVICE_TYPES.RESPONSE_MESSAGE_TO_COMPANION:this.processResponseMessageToCompanion(t);break;case c.MESSAGES_CHAT_SERVICE_TYPES.MESSAGE_DELIVERY_STATUS_CHANGE:this.processMessageStatusDeliveredChange(t);break;case c.MESSAGES_CHAT_SERVICE_TYPES.MESSAGE_READ_STATUS_CHANGE:this.processMessageStatusReadedChange(t);break;case c.MESSAGES_CHAT_SERVICE_TYPES.MESSAGE_EDITED:this.processMessageStatusEditedChange(t);break;case c.MESSAGES_CHAT_SERVICE_TYPES.MESSAGE_DELETED:this.processDeleteMessage(t);break;case c.MESSAGES_CHAT_SERVICE_TYPES.CLEAR_CURRENT_COMPANION:this.clearCurrentCompanion();break;default:o.Console.appendText(`Chat page received unresolved message: ${e}/${JSON.stringify(t)}`)}}messageWithID(e){return this._currentCompanionMessages.find((t=>t.messageID===e))}processMessageStatusDeliveredChange(e){const t=JSON.parse(e),s=this.messageWithID(t.payload.message.id);void 0!==s&&s.setMessgeStatusDelivered()}processMessageStatusReadedChange(e){const t=JSON.parse(e),s=this.messageWithID(t.payload.message.id);void 0!==s&&s.setMessgeStatusReaded()}processMessageStatusEditedChange(e){const t=JSON.parse(e),s=this.messageWithID(t.payload.message.id);void 0!==s&&s.setMessgeStatusEdited(t.payload.message.text)}processReceivingMessageFromCompanion(e){o.Console.appendText(e);const t=JSON.parse(e);if(t.from!==this._currentCompanion)return;const s=this.specialElements["right-dialog"];0===this._currentCompanionMessages.length&&(s.innerHTML="");const n=new u.default(s,t,t.to===this.states.loggedUser.login);this._currentCompanionMessages.push(n)}processResponseMessageToCompanion(e){const t=JSON.parse(e),s=t.message;if(s.to!==this._currentCompanion)return;const n=this.specialElements["right-dialog"];0===this._currentCompanionMessages.length&&(n.innerHTML="");const i=new u.default(n,s,s.to===this.states.loggedUser.login);this._currentCompanionMessages.push(i),this.specialElements["right-dialog"].scrollTop=this.specialElements["right-dialog"].scrollHeight,this.lastRequestIDSendMessage===t.id&&(this.lastRequestIDSendMessage="",this.setMessageSendDisabled(),this.setButtonSendDisabled()),this.setMessageStatusRead(),n.scrollTop=n.scrollHeight}setFilter(){const e=this.specialElements["left-search"];this.states.chatService.filter=e.value,this.updateCompanionsList()}async updateCompanionsList(){const e=this.states.chatService.companions,t=this.companions,s=h.companionListElement;e.forEach(((e,n)=>{if(n>=t.length){const e=new d.Element(s);t.push(e),this.specialElements["left-users-list"].appendChild(e.sellingHTML)}const i=t[n];i.sellingHTML.dataset.user=e.login,i.specialElements["user-status"].classList.toggle("user-status-active",e.isLogined),i.specialElements["user-login"].innerText=e.login,i.specialElements["user-messages"].innerText=e.unreadMessages.toString(),i.specialElements["user-messages"].classList.toggle("hide-element",0===e.unreadMessages)}));const n=e.length;for(;n<t.length;)t[n].specialElements["companion-element"].remove(),t.splice(n,1);this.specialElements["user-info"].innerText=`${this.states.loggedUser.login}`}clearCurrentCompanion(){o.Console.appendText("Clear current companions"),this._currentCompanion="",this._currentCompanionMessages=[],this.specialElements["right-dialog"].innerHTML="",this.specialElements["right-dialog"].appendChild(d.Element.createElement({tag:"label",text:"Выберите пользователя для отправки сообщения...",attributes:{identifier:"right-dialog-placeholder"},classes:"chat-main-right-dialog-placeholder",child:[]})),this.specialElements["right-companion-login"].innerText="",this.specialElements["right-companion-status"].innerText="",this.setButtonSendDisabled(),this.setMessageSendDisabled()}createMessagesList(e){if(this.specialElements["right-companion-login"].innerText=this._currentCompanion,this.setCurrentCompanionStatus(),this.specialElements["right-dialog"].innerHTML="",this._currentCompanionMessages=[],0===e.length){const e={tag:"label",text:"Напишите ваше первое сообщение...",attributes:{identifier:"right-dialog-placeholder"},classes:"chat-main-right-dialog-placeholder",child:[]};return void this.specialElements["right-dialog"].appendChild(d.Element.createElement(e))}const t=this.specialElements["right-dialog"];e.forEach((e=>{const s=new u.default(t,e,e.to===this.states.loggedUser.login);this._currentCompanionMessages.push(s),(e.status.isReaded||e.from===this.states.loggedUser.login)&&(t.scrollTop=t.scrollHeight)}))}setMessageStatusRead(){this._currentCompanionMessages.forEach((e=>{e.message.to!==this.states.loggedUser.login||e.message.status.isReaded||(e.message.status.isReaded=!0,e.setMessgeStatusReaded(),this.states.chatService.requestReadMessage(e.messageID))})),this.states.chatService.updateCompanionUnreadMessage(this._currentCompanion,0)}setCurrentCompanionStatus(){const e=this.states.chatService.getCompanionStatus(this._currentCompanion);this.specialElements["right-companion-status"].innerText=e?"в сети":"не в сети",this.specialElements["right-companion-status"].classList.toggle("status-offline",!e)}async processDeleteMessage(e){const t=this.messageWithID(e);void 0!==t&&(t.specialElements["dialog-message"].remove(),this._currentCompanionMessages.splice(this._currentCompanionMessages.indexOf(t),1))}}t.default=g},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.messageElement=t.companionListElement=t.chat=void 0,t.chat={tag:"main",text:"",attributes:{},classes:"chat",child:[{tag:"section",text:"",attributes:{},classes:"chat-header",child:[{tag:"label",text:"",attributes:{},classes:"chat-header-user-name",child:[{tag:"div",text:"Пользователь: ",attributes:{},classes:"",child:[]},{tag:"div",text:"Myname",attributes:{identifier:"user-info"},classes:"chat-header-user-name-name",child:[]}]},{tag:"label",text:"Fun Chat",attributes:{},classes:"chat-header-app-name",child:[]},{tag:"div",text:"",attributes:{},classes:"chat-header-buttons",child:[{tag:"button",text:"Выход",attributes:{type:"button",identifier:"chat-logout"},classes:"chat-header-buttons-logout",child:[]},{tag:"button",text:"i",attributes:{type:"button",identifier:"chat-info"},classes:"chat-header-buttons-info",child:[]}]}]},{tag:"section",text:"",attributes:{},classes:"chat-main",child:[{tag:"div",text:"",attributes:{},classes:"chat-main-left",child:[{tag:"input",text:"",attributes:{placeholder:"Поиск...",identifier:"left-search"},classes:"chat-main-left-search",child:[]},{tag:"ul",text:"",attributes:{identifier:"left-users-list"},classes:"chat-main-left-users-list",child:[]}]},{tag:"div",text:"",attributes:{},classes:"chat-main-right",child:[{tag:"div",text:"",attributes:{},classes:"chat-main-right-companion",child:[{tag:"div",text:"",attributes:{identifier:"right-companion-login"},classes:"chat-main-right-companion-login",child:[]},{tag:"div",text:"",attributes:{identifier:"right-companion-status"},classes:"chat-main-right-companion-status",child:[]}]},{tag:"div",text:"",attributes:{identifier:"right-dialog"},classes:"chat-main-right-dialog",child:[{tag:"label",text:"Выберите пользователя для отправки сообщения...",attributes:{identifier:"right-dialog-placeholder"},classes:"chat-main-right-dialog-placeholder",child:[]}]},{tag:"form",text:"",attributes:{identifier:"right-send-input-form"},classes:"chat-main-right-send",child:[{tag:"input",text:"",attributes:{placeholder:"Сообщение...",disabled:"",value:"",identifier:"right-send-input"},classes:"chat-main-right-send-input",child:[]},{tag:"button",text:"Отправить",attributes:{type:"submit",disabled:"",identifier:"right-send-button"},classes:"chat-main-right-send-button",child:[]}]}]}]},{tag:"section",text:"",attributes:{},classes:"chat-footer",child:[{tag:"label",text:"RSSchool",attributes:{},classes:"",child:[]},{tag:"label",text:"CerBeer",attributes:{},classes:"chat-footer-about",child:[{tag:"a",text:"",attributes:{href:"https://github.com/CerBeer"},classes:"chat-footer-about-link",child:[{tag:"img",text:"",attributes:{alt:"Разработано CerBeer",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFMTZCRDY3REIzRjAxMUUyQUQzREIxQzRENUFFNUM5NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFMTZCRDY3RUIzRjAxMUUyQUQzREIxQzRENUFFNUM5NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUxNkJENjdCQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUxNkJENjdDQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SM9MCAAAA+5JREFUeNrEV11Ik1EY3s4+ddOp29Q5b0opCgKFsoKoi5Kg6CIhuwi6zLJLoYLopq4qsKKgi4i6CYIoU/q5iDAKs6syoS76IRWtyJ+p7cdt7sf1PGOD+e0c3dygAx/67ZzzPM95/877GYdHRg3ZjMXFxepQKNS6sLCwJxqNNuFpiMfjVs4ZjUa/pmmjeD6VlJS8NpvNT4QQ7mxwjSsJiEQim/1+/9lgMHgIr5ohuxG1WCw9Vqv1clFR0dCqBODElV6v90ogEDjGdYbVjXhpaendioqK07CIR7ZAqE49PT09BPL2PMgTByQGsYiZlQD4uMXtdr+JxWINhgINYhGT2MsKgMrm2dnZXgRXhaHAg5jEJodUAHxux4LudHJE9RdEdA+i3Juz7bGHe4mhE9FNrgwBCLirMFV9Okh5eflFh8PR5nK5nDabrR2BNJlKO0T35+Li4n4+/J+/JQCxhmu5h3uJoXNHPbmWZAHMshWB8l5/ipqammaAf0zPDDx1ONV3vurdidqwAQL+pEc8sLcAe1CCvQ3YHxIW8Pl85xSWNC1hADDIv0rIE/o4J0k3kww4xSlwIhcq3EFFOm7KN/hUGOQkt0CFa5WpNJlMvxBEz/IVQAxg/ZRZl9wiHA63yDYieM7DnLP5CiAGsC7I5sgtYKJGWe2A8seFqgFJrJjEPY1Cn3pJ8/9W1e5VWsFDTEmFrBcoDhZJEQkXuhICMyKpjhahqN21hRYATKfUOlDmkygrR4o4C0VOLGJKrOITKB4jijzdXygBKixyC5TDQdnk/Pz8qRw6oOWGlsTKGOQW6OH6FBWsyePxdOXLTgxiyebILZCjz+GLgMIKnXNzc49YMlcRdHXcSwxFVgTInQhC9G33UhNoJLuqq6t345p9y3eUy8OTk5PjAHuI9uo4b07FBaOhsu0A4Unc+T1TU1Nj3KsSSE5yJ65jqF2DDd8QqWYmAZrIM2VlZTdnZmb6AbpdV9V6ec9znf5Q7HjYumdRE0JOp3MjitO4SFa+cZz8Umqe3TCbSLvdfkR/kWDdNQl5InuTcysOcpFT35ZrbBxx4p3JAHlZVVW1D/634VRt+FvLBgK/v5LV9WS+10xMTEwtRw7XvqOL+e2Q8V3AYIOIAXQ26/heWVnZCVfcyKHg2CBgTpmPmjYM8l24GyaUHyaIh7XwfR9ErE8qHoDfn2LTNAVC0HX6MFcBIP8Bi+6F6cdW/DICkANRfx99fEYFQ7Nph5i/uQiA214gno7K+guhaiKg9gC62+M8eR7XsBsYJ4ilam60Fb7r7uAj8wFyuwM1oIOWgfmDy6RXEEQzJMPe23DXrVS7rtyD3Df8z/FPgAEAzWU5Ku59ZAUAAAAASUVORK5CYII="},classes:"chat-footer-about-link-img",child:[]}]}]},{tag:"label",text:"2024",attributes:{},classes:"",child:[]}]}]},t.companionListElement={tag:"li",text:"",attributes:{identifier:"companion-element"},classes:"chat-main-left-users-list-user",child:[{tag:"div",text:"",attributes:{identifier:"user-status"},classes:"chat-main-left-users-list-user-status",child:[]},{tag:"label",text:"",attributes:{identifier:"user-login"},classes:"chat-main-left-users-list-user-login",child:[]},{tag:"label",text:"",attributes:{identifier:"user-messages"},classes:"chat-main-left-users-list-user-messages",child:[]}]},t.messageElement={tag:"div",text:"",attributes:{identifier:"dialog-message"},classes:"chat-main-right-dialog-message",child:[{tag:"div",text:"",attributes:{},classes:"chat-main-right-dialog-message-box",child:[{tag:"div",text:"",attributes:{},classes:"chat-main-right-dialog-message-box-header",child:[{tag:"label",text:"",attributes:{identifier:"header-label-left"},classes:"chat-main-right-dialog-message-box-header-label-left",child:[]},{tag:"label",text:"",attributes:{identifier:"header-label-right"},classes:"chat-main-right-dialog-message-box-header-label-right",child:[]}]},{tag:"div",text:"",attributes:{identifier:"box-text"},classes:"chat-main-right-dialog-message-box-text",child:[]},{tag:"div",text:"",attributes:{},classes:"chat-main-right-dialog-message-box-footer",child:[{tag:"label",text:"",attributes:{identifier:"footer-label-left"},classes:"chat-main-right-dialog-message-box-footer-label-left",child:[]},{tag:"label",text:"",attributes:{identifier:"footer-label-right"},classes:"chat-main-right-dialog-message-box-footer-label-right",child:[]}]}]}]}},117:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=s(401),o=a(s(564));class l extends r.Element{constructor(e,t,s){super(o.messageElement),this._messageID="",this.isInput=!1,this._messageID=t.id,this._message=t,this.isInput=s,e.appendChild(this.sellingHTML),this.specialElements["header-label-left"].innerText=t.from,this.specialElements["header-label-right"].innerText=new Date(t.datetime).toLocaleString(),this.specialElements["box-text"].innerText=t.text,this.specialElements["footer-label-left"].innerText="",this.specialElements["footer-label-right"].innerText=this.statusMessageToString(t.status),this.specialElements["dialog-message"].classList.toggle("message-from-companion",s)}statusMessageToString(e){return e.isReaded?"прочитано":e.isEdited?"изменено":e.isDelivered?"доставлено":"отправлено"}get messageID(){return this._messageID}get message(){return this._message}setMessgeStatusDelivered(){this._message.status.isDelivered=!0,this.setMessgeStatus("доставлено")}setMessgeStatusReaded(){this._message.status.isReaded=!0,this.setMessgeStatus("прочитано")}setMessgeStatusEdited(e){this._message.status.isEdited=!0,this.setMessgeStatus("изменено"),this._message.text=e,this.specialElements["box-text"].innerText=e}setMessgeStatus(e){this.specialElements["footer-label-right"].innerText=e}}t.default=l},192:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=s(133),o=s(401),l=s(273),d=a(s(121));s(724);class c extends o.Element{constructor(e,t){super(d.login),e.appendChild(this.sellingHTML),this.states=t,this.loggedUser=this.states.loggedUser,this.createListeners(),this.specialElements["button-login"].disabled=!0,r.Console.appendText("Create Login page")}createListeners(){this.specialElements["chat-info"].addEventListener("click",(()=>this.states.router.goToPage(l.PAGE_NAMES.ABOUT))),this.specialElements["login-name"].addEventListener("input",(()=>{this.checkName(),this.setButtonDisabled()})),this.specialElements["login-password"].addEventListener("input",(()=>{this.checkPassword(),this.setButtonDisabled()})),this.specialElements["login-form"].addEventListener("submit",(e=>this.submitLogin(e)))}checkName(){const e=this.specialElements["field-login-name"];let t=!0;return this.specialElements["login-name"].value.length<4&&(t=!1),e.classList.toggle("input-error",!t),t}checkPassword(){const e=this.specialElements["field-login-password"],t=this.specialElements["login-password"].value;let s=!0,n=!0;return t.length<4&&(s=!1),e.classList.toggle("input-error",!s),t.toLowerCase()===t&&(n=!1),e.classList.toggle("input-error-contains",!n),s&&n}setButtonDisabled(){this.specialElements["button-login"].disabled=!(this.checkName()&&this.checkPassword())}submitLogin(e){if(e.preventDefault(),!this.checkName()||!this.checkPassword())return;const t=this.specialElements["login-name"],s=this.specialElements["login-password"];return this.states.loggedUser={login:t.value,password:s.value},this.states.dispatcher.processOpen(),!1}receiveMessage(e,t){r.Console.appendText(`Caught message in Login page: ${e}, ${t}`);const s={tag:"div",text:"",attributes:{},classes:"splash-error-background",child:[{tag:"div",text:`${t[0].toUpperCase()}${t.slice(1)}`,attributes:{identifier:"console-text"},classes:"splash-error",child:[]}]},n=o.Element.createElement(s);this.specialElements["login-form"].appendChild(n),setTimeout((()=>n.remove()),1500)}}t.default=c},121:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.login=void 0,t.login={tag:"form",text:"",attributes:{identifier:"login-form"},classes:"login-form",child:[{tag:"fieldset",text:"",attributes:{},classes:"login-form-fieldset",child:[{tag:"legend",text:"Авторизация",attributes:{},classes:"",child:[]},{tag:"div",text:"",attributes:{},classes:"login-form-fieldset-field",child:[{tag:"label",text:"Имя",attributes:{},classes:"",child:[]},{tag:"div",text:"",attributes:{identifier:"field-login-name"},classes:"login-form-fieldset-field-container",child:[{tag:"input",text:"",attributes:{placeholder:"Имя пользователя",type:"text",identifier:"login-name",autocomplete:"username"},classes:"login-form-fieldset-field-container-input",child:[]},{tag:"label",text:"Длина должна быть более 4 символов",attributes:{identifier:"login-name-tooltip"},classes:"login-form-fieldset-field-container-tooltip tooltip-name-length",child:[]}]}]},{tag:"div",text:"",attributes:{},classes:"login-form-fieldset-field",child:[{tag:"label",text:"Пароль",attributes:{},classes:"",child:[]},{tag:"div",text:"",attributes:{identifier:"field-login-password"},classes:"login-form-fieldset-field-container",child:[{tag:"input",text:"",attributes:{placeholder:"Пароль",type:"password",identifier:"login-password",autocomplete:"current-password"},classes:"login-form-fieldset-field-container-input",child:[]},{tag:"label",text:"Длина должна быть более 4 символов",attributes:{identifier:"login-password-tooltip-length"},classes:"login-form-fieldset-field-container-tooltip tooltip-password-length",child:[]},{tag:"label",text:"Используйте прописные и заглавные буквы",attributes:{identifier:"login-password-tooltip-contains"},classes:"login-form-fieldset-field-container-tooltip tooltip-password-contains",child:[]}]}]},{tag:"div",text:"",attributes:{},classes:"login-form-fieldset-buttons",child:[{tag:"button",text:"Вход",attributes:{type:"submit",identifier:"button-login"},classes:"app-button",child:[]},{tag:"button",text:"i",attributes:{type:"button",identifier:"chat-info"},classes:"app-button-info",child:[]}]}]}]}},347:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.splash=void 0,t.splash={tag:"div",text:"",attributes:{},classes:"splash-background",child:[{tag:"div",text:"",attributes:{},classes:"splash",child:[{tag:"img",text:"",attributes:{src:"./assets/images/wait.gif"},classes:"splash-icons",child:[]},{tag:"div",text:"Подключение к серверу ...",attributes:{},classes:"splash-text",child:[]}]}]}},212:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=s(133),o=s(401),l=a(s(347));s(872);class d extends o.Element{constructor(e){super(l.splash),e.appendChild(this.sellingHTML),r.Console.appendText("Create Splash page")}}t.default=d},470:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=s(133),o=a(s(184)),l=s(366),d=s(273),c=s(657);t.default=class{constructor(e){this._companions=[],this._currentCompanion="",this._filter="",r.Console.appendText("Create Chat service"),this.states=e,this.states.chatService=this}set filter(e){this._filter=e}get companions(){return 0===this._filter.length?this._companions.filter((e=>e.login!==this.states.loggedUser.login)):this._companions.filter((e=>e.login!==this.states.loggedUser.login&&e.login.includes(this._filter)))}getCompanionStatus(e){const t=this._companions.find((t=>t.login===e));return void 0!==t&&t.isLogined}processMessage(e,t){const s=JSON.parse(t);switch(e){case l.MESSAGES_TYPES.ERROR:break;case l.MESSAGES_TYPES.USER_LOGIN:this.processUserLogin(),r.Console.appendText(`chatService received message: ${e}/${t}`);break;case l.MESSAGES_TYPES.USER_LOGOUT:break;case l.MESSAGES_TYPES.USER_ACTIVE:this.createCompanionsList(s.payload.users),this.states.worker.sendMessage(o.requestCompanionLoggedOut().request);break;case l.MESSAGES_TYPES.USER_INACTIVE:this.createCompanionsList(s.payload.users),this.requestCompanionMessageHistoryOnLogin();break;case l.MESSAGES_TYPES.MSG_FROM_USER:if(void 0!==this._companions.find((e=>e.id===s.id))){const e=s.payload.messages.filter((e=>e.to===this.states.loggedUser.login&&!e.status.isReaded));return void this.processCompanionMessageHistoryOnLogin(s.id,e.length)}this.processCompanionMessageHistory(s.payload.messages);break;case l.MESSAGES_TYPES.USER_EXTERNAL_LOGIN:case l.MESSAGES_TYPES.USER_EXTERNAL_LOGOUT:this.processCompanionLogInOut(s.payload.user.login,s.payload.user.isLogined),r.Console.appendText(`chatService received message: ${e}/${t}`);break;case l.MESSAGES_TYPES.MSG_SEND:this.processReceivingMessageFrom(s.id,s.payload.message);break;case l.MESSAGES_TYPES.MSG_DELIVER:this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.MESSAGE_DELIVERY_STATUS_CHANGE,t);break;case l.MESSAGES_TYPES.MSG_READ:this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.MESSAGE_READ_STATUS_CHANGE,t);break;case l.MESSAGES_TYPES.MSG_EDIT:this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.MESSAGE_EDITED,t);break;case l.MESSAGES_TYPES.MSG_DELETE:this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.MESSAGE_DELETED,s.payload.message.id)}}processUserLogin(){this._companions=[],this.states.worker.sendMessage(o.requestCompanionLoggedIn().request),this.clearCurrentCompanion()}createCompanionsList(e){for(const t of e)void 0===this._companions.find((e=>e.login===t.login))&&this._companions.push({id:"",login:t.login,isLogined:t.isLogined,unreadMessages:0,sellingHTML:void 0});this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.UPDATE_COMPANIONS_LIST,"")}requestCompanionMessageHistoryOnLogin(){const e=this._companions.find((e=>""===e.id&&e.login!==this.states.loggedUser.login));if(void 0!==e){const t=o.requestCompanionMessageHistory(e.login);e.id=t.id,this.states.worker.sendMessage(t.request)}}async processCompanionMessageHistoryOnLogin(e,t){const s=this._companions.find((t=>t.id===e));void 0!==s&&(s.unreadMessages=t,t>0&&this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.UPDATE_COMPANIONS_LIST,""),this.requestCompanionMessageHistoryOnLogin())}processCompanionLogInOut(e,t){r.Console.appendText(`External user isLogined: ${e}/${t}`);let s=this._companions.find((t=>t.login===e));void 0===s&&(s={id:"",login:e,isLogined:t,unreadMessages:0,sellingHTML:void 0},this._companions.push(s)),s.isLogined=t,this._companions.sort(((e,t)=>e.isLogined===t.isLogined?0:e.isLogined?-1:1)),this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.COMPANION_STATUS_UPDATE,e),r.Console.appendText(`External users: ${JSON.stringify(this._companions)}`)}processReceivingMessageFrom(e,t){if(r.Console.appendText(`Receiving message: ${t.from}/${JSON.stringify(t)}`),t.from===this.states.loggedUser.login)this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.RESPONSE_MESSAGE_TO_COMPANION,JSON.stringify({id:e,message:t}));else{const e=this._companions.find((e=>e.login===t.from));void 0!==e&&(e.unreadMessages+=1,this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.RECEIVING_MESSAGE_FROM_COMPANION,JSON.stringify(t)))}}updateCompanionUnreadMessage(e,t){const s=this._companions.find((t=>t.login===e));void 0!==s&&(s.unreadMessages=t,this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.UPDATE_COMPANIONS_LIST,""))}changeCurrentCompanion(e){if(r.Console.appendText(`Change current companions: ${e}`),void 0!==this._companions.find((t=>t.login===e))){this._currentCompanion=e;const t=o.requestCompanionMessageHistory(e);this.states.worker.sendMessage(t.request)}}clearCurrentCompanion(){r.Console.appendText("Clear current companions"),this._currentCompanion="",this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.CLEAR_CURRENT_COMPANION,"")}processCompanionMessageHistory(e){this.states.router.sendToPage(d.PAGE_NAMES.CHAT,c.MESSAGES_CHAT_SERVICE_TYPES.MESSAGE_HISTORY_WITH_USER,JSON.stringify(e))}requestSendMessage(e,t){const s=o.requestSendUserMessage(e,t);return this.states.worker.sendMessage(s.request),s.id}requestReadMessage(e){const t=o.requestReadMessage(e);return this.states.worker.sendMessage(t.request),t.id}}},657:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGES_CHAT_SERVICE_TYPES=void 0,t.MESSAGES_CHAT_SERVICE_TYPES={UPDATE_COMPANIONS_LIST:"UPDATE_COMPANIONS_LIST",RECEIVING_MESSAGE_FROM_COMPANION:"RECEIVING_MESSAGE_FROM_COMPANION",MESSAGE_HISTORY_WITH_USER:"MESSAGE_HISTORY_WITH_USER",COMPANION_STATUS_UPDATE:"COMPANION_STATUS_UPDATE",RESPONSE_MESSAGE_TO_COMPANION:"RESPONSE_MESSAGE_TO_COMPANION",MESSAGE_DELIVERY_STATUS_CHANGE:"MESSAGE_DELIVERY_STATUS_CHANGE",MESSAGE_READ_STATUS_CHANGE:"MESSAGE_READ_STATUS_CHANGE",MESSAGE_EDITED:"MESSAGE_EDITED",MESSAGE_DELETED:"MESSAGE_DELETED",CLEAR_CURRENT_COMPANION:"CLEAR_CURRENT_COMPANION"}},402:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=s(133),o=a(s(184)),l=s(366),d=s(273);t.default=class{constructor(e){this.lastQueryLoginID="",r.Console.appendText("Create Dispatcher"),this.states=e,this.states.dispatcher=this}processOpen(){r.Console.appendText("WS open: open"),this.states.states.session.isEmptyVal("loggedUser")?(this.lastQueryLoginID="",this.states.isUserLogged=!1,this.states.router.goToPage(d.PAGE_NAMES.LOGIN)):this.sendLogIn()}sendLogIn(){if(!this.states.states.session.isEmptyVal("loggedUser")&&!this.states.isUserLogged){r.Console.appendText("Send: login");const e=o.requestUserLogin(this.states.loggedUser);this.states.worker.sendMessage(e.request),this.lastQueryLoginID=e.id}}sendLogOut(){if(!this.states.states.session.isEmptyVal("loggedUser")&&this.states.isUserLogged){r.Console.appendText("Send: logout");const e=o.requestUserLogout(this.states.loggedUser);this.states.worker.sendMessage(e.request)}}processMessage(e){const t=JSON.parse(e.data);switch(t.type){case l.MESSAGES_TYPES.ERROR:this.processMessageError(t);break;case l.MESSAGES_TYPES.USER_LOGIN:this.processMessageUserLogin(t);break;case l.MESSAGES_TYPES.USER_LOGOUT:this.processMessageUserLogOut(t);break;default:this.states.chatService.processMessage(t.type,e.data)}}processMessageError(e){if(r.Console.appendText(`Received error: ${e.payload.error}`),this.lastQueryLoginID===e.id)return this.setStateUserLogOut(),void this.states.router.sendToPage(d.PAGE_NAMES.LOGIN,"ERROR",e.payload.error);this.states.chatService.processMessage(l.MESSAGES_TYPES.ERROR,e.payload.error)}processMessageUserLogin(e){r.Console.appendText(`Received UserLogin: LogIn:${e.payload.user.login} isLogined:${e.payload.user.isLogined}`),e.payload.user.isLogined&&this.setStateUserLogIn(this.states.loggedUser)}processMessageUserLogOut(e){r.Console.appendText(`Received UserLogin: LogOut:${e.payload.user.login} isLogined:${e.payload.user.isLogined}`),this.setStateUserLogOut()}setStateUserLogIn(e){this.lastQueryLoginID="",this.states.loggedUser=e,this.states.isUserLogged=!0,this.states.chatService.processMessage(l.MESSAGES_TYPES.USER_LOGIN,JSON.stringify(e)),this.states.router.goToPageByStatus()}setStateUserLogOut(){const e=this.states.loggedUser;this.lastQueryLoginID="",this.states.loggedUser={login:"",password:""},this.states.isUserLogged=!1,this.states.chatService.processMessage(l.MESSAGES_TYPES.USER_LOGOUT,JSON.stringify(e)),this.states.router.goToPageByStatus()}}},273:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAGE_NAMES=void 0,t.PAGE_NAMES={LOGIN:"login",ABOUT:"about",CHAT:"chat",NONE:"none"}},362:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(133),a=n(s(420)),r=n(s(402)),o=n(s(470)),l=n(s(192)),d=n(s(132)),c=n(s(162)),u=s(273);t.default=class{constructor(e){this.rootURL=this.getRootURL(),i.Console.appendText("Create Router"),this.currentPage={name:u.PAGE_NAMES.NONE,page:void 0},this.states=e,this.states.router=this,new o.default(this.states),new a.default(this.states),new r.default(this.states),this.goToPageByUrlWithHash()}getRootURL(){let e=window.location.href.split("#")[0];e=e.split("?")[0];const t=e.indexOf("index");return t>0&&(e=e.slice(0,t)),"/"===e[e.length-1]&&(e=e.slice(0,-1)),e}goToPageByUrlWithHash(){const e=window.location.href.split("#");2===e.length&&this.goToPage(e[1])}setHistoryByPage(e){i.Console.appendText(`Change URL to ${e}`),this.states.states.enableSPAStyleURLAdjustments&&window.history.replaceState(null,"",`${this.rootURL}/${e}`)}goToPage(e){const t=e.toLowerCase();if(t!==this.currentPage.name&&(this.currentPage.name!==u.PAGE_NAMES.NONE&&(this.currentPage.page?.sellingHTML.remove(),this.currentPage.name=u.PAGE_NAMES.NONE),t!==u.PAGE_NAMES.NONE)){switch(t){case u.PAGE_NAMES.LOGIN:this.currentPage.name=t,this.currentPage.page=new l.default(document.body,this.states);break;case u.PAGE_NAMES.ABOUT:this.currentPage.name=t,this.currentPage.page=new d.default(document.body,this.states);break;case u.PAGE_NAMES.CHAT:this.currentPage.name=t,this.currentPage.page=new c.default(document.body,this.states);break;default:this.goToPage(this.identifyingPageByStatus())}this.setHistoryByPage(t)}}sendToPage(e,t,s){this.currentPage.page&&this.currentPage.name===e&&this.currentPage.page.receiveMessage(t,s)}goToPageByStatus(){this.currentPage.name!==u.PAGE_NAMES.ABOUT&&this.goToPage(this.identifyingPageByStatus())}identifyingPageByStatus(){return this.states.isUserLogged?u.PAGE_NAMES.CHAT:u.PAGE_NAMES.LOGIN}}},348:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=s(133),o=a(s(350));t.default=class{constructor(){this._states=o.states,r.Console.appendText("Create StateManager")}get states(){return this._states}get splashPage(){return this._states.splashPage}set splashPage(e){this._states.splashPage=e}get router(){return this._states.router}set router(e){this._states.router=e}get worker(){return this._states.worker}set worker(e){this._states.worker=e}get dispatcher(){return this._states.dispatcher}set dispatcher(e){this._states.dispatcher=e}get chatService(){return this._states.chatService}set chatService(e){this._states.chatService=e}get loggedUser(){return this._states.session.getVal("loggedUser")}set loggedUser(e){this._states.session.setVal("loggedUser",e)}get isUserLogged(){return this._states.isUserLogged}set isUserLogged(e){this._states.isUserLogged=e}getVal(e){return this._states.session.getVal(e)}setVal(e,t){this._states.session.setVal(e,t)}}},350:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.states=void 0;const i=s(977),a=n(s(212));t.states={enableSPAStyleURLAdjustments:!0,lastQueryLoginID:0,isUserLogged:!1,router:void 0,worker:void 0,dispatcher:void 0,chatService:void 0,splashPage:new a.default(document.body),session:new i.Storage(sessionStorage,{loggedUser:{login:"",password:""},serverInfo:{URL:"ws://127.0.0.1:4000/"}})}},366:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGES_TYPES=void 0,t.MESSAGES_TYPES={USER_LOGIN:"USER_LOGIN",ERROR:"ERROR",USER_LOGOUT:"USER_LOGOUT",USER_EXTERNAL_LOGIN:"USER_EXTERNAL_LOGIN",USER_EXTERNAL_LOGOUT:"USER_EXTERNAL_LOGOUT",USER_ACTIVE:"USER_ACTIVE",USER_INACTIVE:"USER_INACTIVE",MSG_SEND:"MSG_SEND",MSG_FROM_USER:"MSG_FROM_USER",MSG_DELIVER:"MSG_DELIVER",MSG_READ:"MSG_READ",MSG_DELETE:"MSG_DELETE",MSG_EDIT:"MSG_EDIT"}},184:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestReadMessage=t.requestSendUserMessage=t.requestCompanionMessageHistory=t.requestCompanionLoggedOut=t.requestCompanionLoggedIn=t.requestUserLogout=t.requestUserLogin=void 0;const n=s(777),i=s(366);t.requestUserLogin=e=>{const t={id:n.GeneratorID.next(),type:i.MESSAGES_TYPES.USER_LOGIN,payload:{user:{login:e.login,password:e.password}}};return{request:JSON.stringify(t),id:t.id}},t.requestUserLogout=e=>{const t={id:n.GeneratorID.next(),type:i.MESSAGES_TYPES.USER_LOGOUT,payload:{user:{login:e.login,password:e.password}}};return{request:JSON.stringify(t),id:t.id}},t.requestCompanionLoggedIn=()=>{const e={id:n.GeneratorID.next(),type:i.MESSAGES_TYPES.USER_ACTIVE,payload:null};return{request:JSON.stringify(e),id:e.id}},t.requestCompanionLoggedOut=()=>{const e={id:n.GeneratorID.next(),type:i.MESSAGES_TYPES.USER_INACTIVE,payload:null};return{request:JSON.stringify(e),id:e.id}},t.requestCompanionMessageHistory=e=>{const t={id:n.GeneratorID.next(),type:i.MESSAGES_TYPES.MSG_FROM_USER,payload:{user:{login:e}}};return{request:JSON.stringify(t),id:t.id}},t.requestSendUserMessage=(e,t)=>{const s={id:n.GeneratorID.next(),type:i.MESSAGES_TYPES.MSG_SEND,payload:{message:{to:e,text:t}}};return{request:JSON.stringify(s),id:s.id}},t.requestReadMessage=e=>{const t={id:n.GeneratorID.next(),type:i.MESSAGES_TYPES.MSG_READ,payload:{message:{id:e}}};return{request:JSON.stringify(t),id:t.id}}},420:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=s(133);t.default=class{constructor(e){n.Console.appendText("Create Worker"),this.states=e,this.states.worker=this,this.serverInfo=this.states.getVal("serverInfo"),this.socket=this.getNewConnection(),this.deferredRequests=[],this.idSenderDeferredRequests=null}sendMessage(e){this.deferredRequests.push(e),this.socket&&this.socket.readyState===WebSocket.OPEN&&(this.idSenderDeferredRequests||this.sendDeferredRequests())}getNewConnection(){n.Console.appendText(`Query connect to ${this.serverInfo.URL}`);const e=new WebSocket(this.serverInfo.URL);return this.socket=e,e.addEventListener("open",(()=>{this.states.dispatcher.processOpen(),this.states.splashPage.putAway(),this.idSenderDeferredRequests||(this.idSenderDeferredRequests=setTimeout((()=>this.sendDeferredRequests()),100))})),e.addEventListener("message",(e=>{this.states.dispatcher.processMessage(e)})),e.addEventListener("error",(e=>{n.Console.appendText(`WS error: ${e.type}`),this.socket.close()})),e.addEventListener("close",(e=>{n.Console.appendText(`WS close: ${e.type}`),this.states.isUserLogged=!1,this.states.splashPage.retrieve(),this.getNewConnection()})),e}sendDeferredRequests(){if(this.idSenderDeferredRequests=null,this.socket&&0!==this.deferredRequests.length){if(this.socket&&this.socket.readyState===WebSocket.OPEN){const e=this.deferredRequests.shift();e&&this.socket.send(e)}this.idSenderDeferredRequests=setTimeout((()=>this.sendDeferredRequests()),10)}}}},133:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Console=void 0;const r=s(401),o=a(s(782)),l=s(683);s(635);class d extends r.Element{constructor(){if(d.itThis)return d.itThis;super(o.console),document.body.appendChild(this.sellingHTML),d.itThis=this}static appendText(e){if(!d.itThis)return;if(d.itThis.sellingHTML?.classList.contains("element-hide"))return;const t=d.itThis.specialElements["console-text"];let s=t.childNodes.length-l.settings.maxLines;for(;s>0;)t.removeChild(t.childNodes[0]),s-=1;const n=r.Element.createElement(o.line(e));t.appendChild(n),t.scrollTop=t.scrollHeight}}t.Console=d,t.default=d},782:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.line=t.console=void 0,t.console={tag:"div",text:"",attributes:{},classes:"console-window element-hide",child:[{tag:"code",text:"",attributes:{identifier:"console-text"},classes:"console-window-text",child:[]}]},t.line=function(e){return{tag:"p",text:`${Math.round(performance.now())}: ${e}`,attributes:{},classes:"console-window-line",child:[]}}},683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.settings=void 0,t.settings={maxLines:30}},401:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Element=void 0;class s{constructor(e){this._specialElements={},this._lastMessage={type:"",message:""},this._sellingHTML=s.createElement(e,this._specialElements)}static createElement(e,t){const n=document.createElement(e.tag);return n.textContent=e.text,e.classes.length>0&&n.classList.add(...e.classes.split(" ")),Object.keys(e.attributes).forEach((s=>{t&&"identifier"===s&&(t[e.attributes[s]]=n),n.setAttribute(s,e.attributes[s])})),e.styles&&Object.keys(e.styles).forEach((t=>{n.style.setProperty(t,e.styles[t])})),e.child.forEach((e=>n.appendChild(s.createElement(e,t)))),n}putAway(){this.isAway()||this._sellingHTML.style.setProperty("display","none")}retrieve(){this.isAway()&&this._sellingHTML.style.removeProperty("display")}isAway(){return"none"===this._sellingHTML.style.getPropertyValue("display")}get sellingHTML(){return this._sellingHTML}get specialElements(){return this._specialElements}receiveMessage(e,t){this._lastMessage={type:e,message:t}}}t.Element=s},777:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratorID=void 0;const n=s(133);class i{constructor(){if(i.itThis)return i.itThis;i.itThis=this;const e=new Date;i.currentNumber=24*e.getDay()*60*60+60*e.getHours()*60+60*e.getMinutes()+e.getSeconds(),n.Console.appendText(`Start GeneratorID from ${i.currentNumber}`)}static next(){return i.currentNumber=i.currentNumber+1,`${i.currentNumber}`}}t.GeneratorID=i,t.default=i},977:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;const n=s(133);class i{constructor(e,t){this.storage=e,this.initValues=t;const s=Object.keys(t);s.forEach((e=>{this.initValues[e]=t[e]})),this.values={};const i=Object.keys(e);s.forEach((e=>{this.values[e]=t[e],i.indexOf(e)<0?this.save(e):this.load(e)})),n.Console.appendText("Create Storage")}save(e){this.storage.setItem(e,JSON.stringify(this.values[e]))}load(e){this.values[e]=JSON.parse(this.storage.getItem(e)||"")}setVal(e,t){this.values[e]=t,this.save(e)}getVal(e){return this.values[e]}resetValues(){this.values={},Object.keys(this.initValues).forEach((e=>{this.values[e]=this.initValues[e]}))}isEmptyVal(e){const t=this.getVal(e);let s=!0;return"object"==typeof t?Object.keys(t).forEach((e=>{s=s&&!t[e]})):s=!t,s}}t.Storage=i,t.default=i},156:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.app=void 0;const i=n(s(675));s(966),s(530),t.app=new i.default}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nc=void 0,s(156)})();